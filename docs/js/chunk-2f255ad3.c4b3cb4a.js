(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f255ad3"],{"42f4":function(t,e,r){"use strict";var a=r("d5f0"),n=r.n(a);n.a},"626d":function(t,e,r){},"7e48":function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("v-toolbar",{staticClass:"mb-6",attrs:{dark:"",dense:"",color:"#126496"}},[r("v-icon",[t._v("mdi-dots-hexagon")]),r("v-toolbar-title",{staticClass:"ml-3"},[t._v("DASHBOARD")]),r("v-spacer"),r("v-menu",{attrs:{"close-on-content-click":!1,bottom:"",origin:"center center",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var a=e.on,n=e.attrs;return[r("v-icon",t._g(t._b({},"v-icon",n,!1),a),[t._v("mdi-dots-vertical")])]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[r("v-card",[r("v-list",[r("v-list-item-group",{attrs:{mandatory:"",color:"indigo"}},[r("Draggable",{style:t.zoomLevel,attrs:{list:t.surfs},on:{start:function(e){t.drag=!0},end:function(e){t.drag=!1}}},t._l(t.surfs,(function(e){return r("v-list-item",{key:e.Cross},[r("v-list-item-action",[r("v-switch",{attrs:{color:"green lighten-2"},model:{value:e.Show,callback:function(r){t.$set(e,"Show",r)},expression:"item.Show"}})],1),r("v-list-item-title",[t._v(t._s(e.Cross))])],1)})),1)],1)],1),r("v-card-actions",[r("v-spacer"),r("v-btn",{attrs:{text:""},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),r("v-btn",{attrs:{color:"primary",text:""},on:{click:t.saveSetup}},[t._v("Save")])],1)],1)],1)],1),r("v-row",{attrs:{"no-gutters":""}},t._l(t.activeSurfs,(function(e){return r("v-col",{key:e.Cross,attrs:{cols:"12",lg:"4",md:"6"}},[r("v-card",{staticClass:"ma-5",style:t.zoomLevel,attrs:{rounded:"",color:"grey lighten-3",flat:"",width:"542"}},[r("v-btn",{attrs:{absolute:"",ripple:"","x-small":"",fab:"",top:"",right:"",color:t.getWarningColor(e),elevation:"21",dark:""},on:{click:function(r){return t.gotoDvi(e)}}},[r("v-icon",[t._v(" "+t._s(t.batteryIcon(t.getWarningColor(e))))])],1),r("DashBoardSurf",{staticClass:"ma-0",attrs:{apidata:t.singleSurf(e),headerData:t.getHeader(e),footerData:t.getFooter(e),warningColor:t.getWarningColor(e)}}),r("h6",{attrs:{align:"center",justify:"center"}},[t._v(t._s(t.getFooter(e)))])],1)],1)})),1)],1)},n=[],o=(r("4de4"),r("7db0"),r("d81d"),r("5530")),s=r("15fd"),i=r("b85c"),c=(r("96cf"),r("1da1")),l=r("1a20"),d=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"spreadsheet",staticClass:"jTable"})},u=[],h=(r("99af"),r("4160"),r("c975"),r("b64b"),r("07ac"),r("159b"),r("c4fc"),r("0179")),f=r.n(h),v=r("ee67"),g={name:"dashboardsuf",created:function(){},data:function(){return{alphabet:v.alphabet}},props:{apidata:{type:Array},headerData:{type:String},footerData:{type:String},warningColor:{type:String}},computed:{tableHeaders:function(){return Object.keys(this.apidata[0])},tableData:function(){var t=[];return this.apidata.forEach((function(e){t.push(Object.values(e))})),t.push([]),t},config:function(){return{data:this.tableData,colHeaders:this.tableHeaders,tableOverflow:!1,columnSorting:!1,colWidths:[60,50,100,55,55,55,55,55,62],allowInsertRow:!1,columns:this.setReadOnly(),nestedHeaders:[[{title:this.headerData,colspan:this.tableHeaders.length}]]}}},methods:{cellId:function(t,e){return"".concat(this.alphabet[t].toUpperCase()).concat(e)},setReadOnly:function(){for(var t=[],e=0;e<this.tableHeaders.length;e++)t.push({readOnly:!0});return t},FormatTable:function(t,e){e.hideIndex();for(var r=1;r<=e.rows.length;r++)for(var a=0;a<e.headers.length;a++)e.setStyle(this.cellId(a,r),"color","black");for(a=0;a<e.headers.length;a++)e.setStyle(this.cellId(a,e.rows.length),"background-color",this.warningColor);for(var n=this.tableHeaders.indexOf("ATM"),o=this.tableHeaders.indexOf("Term"),s=1;s<=t.length;s++)e.setStyle(this.cellId(n,s),"background-color","#D2DEE9"),e.setStyle(this.cellId(n,s),"font-weight","bold"),e.setStyle(this.cellId(o,s),"color","#000080"),e.setStyle(this.cellId(o,s),"font-weight","bold"),s>9&&e.setStyle(this.cellId(n,s),"background-color","#EDFAFD")}},mounted:function(){var t=f()(this.$refs.spreadsheet,this.config);this.FormatTable(this.apidata,t),Object.assign(this,{jExcelObj:t}),document.documentElement.style.setProperty("--warning-color","".concat(this.warningColor)),console.log(this.warningColor)}},p=g,m=(r("c8d7"),r("2877")),b=Object(m["a"])(p,d,u,!1,null,null,null),w=b.exports,S=r("c1df"),y=r.n(S),C=r("310e"),D=r.n(C),_=r("5caf"),k={data:function(){return{drag:!1,surfs:[],menu:!1,window:{width:0,height:0},firstWarningColor:"#2DCA61",secondWarningColor:"#71B7F9",thirdWarningColor:"#FC6949"}},components:{DashBoardSurf:w,Draggable:D.a,TreeView:_["a"]},computed:{zoomLevel:function(){var t=window.innerWidth>1700?"90%":"80%";return{zoom:t}},userPrefs:function(){return this.$store.state.dashBoardPrefs},activeSurfs:function(){return this.surfs.filter((function(t){return!0===t.Show}))}},created:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r,a,n,o,s,c,d,u;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.addEventListener("resize",t.handleResize),t.handleResize(),e.prev=2,e.next=5,l["a"].GetDashBoardSurfs({userName:t.$store.state.currentUser});case 5:if(r=e.sent,a=JSON.parse(r.data.dashBoardSurfs),null!==t.userPrefs){n=Object(i["a"])(t.userPrefs);try{for(n.s();!(o=n.n()).done;)s=o.value,c=a.find((function(t){return t.Cross===s.Cross})),c.Show=void 0!==c?s.Show:c.Show,t.surfs.push(c)}catch(h){n.e(h)}finally{n.f()}}else{d=Object(i["a"])(a);try{for(d.s();!(u=d.n()).done;)s=u.value,t.surfs.push(s)}catch(h){d.e(h)}finally{d.f()}}e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),t.$store.dispatch("setSnackbar",{text:"".concat(e.t0," source: DashBoard.vue-created"),top:!0});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})))()},destroyed:function(){window.removeEventListener("resize",this.handleResize)},methods:{handleResize:function(){this.window.width=window.innerWidth,this.window.height=window.innerHeight-65,document.documentElement.style.setProperty("--main-width","".concat(this.window.width,"px")),document.documentElement.style.setProperty("--main-height","".concat(this.window.height,"px"))},saveSetup:function(){var t=this;return Object(c["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,r=t.surfs.map((function(t){var e=t.Cross,r=t.Show;return{Cross:e,Show:r}})),console.log(r),e.next=5,l["a"].saveUserDashBoardPrefs({UserName:t.$store.state.currentUser,DashBoardUI:JSON.stringify(r)});case 5:e.sent,t.$store.dispatch("setSnackbar",{text:"DashBoard Layout Saved",centered:!0}),e.next=12;break;case 9:e.prev=9,e.t0=e["catch"](0),t.$store.dispatch("setSnackbar",{text:"".concat(e.t0," source: DashBoard.vue-saveSetup"),bottom:!0});case 12:t.menu=!1;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},gotoDvi:function(t){this.$store.dispatch("setActivecross",t),this.$router.push({name:"Dvi",params:{ccyPair:t.Cross}})},singleSurf:function(t){var e=[{}];return e=JSON.parse(t.Surface),e=e.map((function(t){t.DK_EFF,t.IPV_ATM,t.RR_MULT,t.S_FLY_MULT,t.SFLY25,t.SFLY10;var e=Object(s["a"])(t,["DK_EFF","IPV_ATM","RR_MULT","S_FLY_MULT","SFLY25","SFLY10"]);return Object(o["a"])({},e)})),e},getHeader:function(t){var e=t.Cross,r=JSON.parse(t.LastUpdate),a=r.Spot;return e=e+" "+a,e},getFooter:function(t){var e=JSON.parse(t.LastUpdate),r="Last Updated : "+e.Time;return r},getWarningColor:function(t){var e=JSON.parse(t.LastUpdate),r=y()(e.Time,"DD/MM/YYYY, h:mm:ss").toDate(),a=new Date,n=a-r,o=12e5,s=24e5,i=n<=o?this.firstWarningColor:n<=s?this.secondWarningColor:this.thirdWarningColor;return i},batteryIcon:function(t){return t===this.firstWarningColor?"mdi-battery-high":t===this.secondWarningColor?"mdi-battery-medium":t===this.thirdWarningColor?"mdi-battery-low":void 0}},watch:{}},L=k,O=(r("42f4"),r("6544")),x=r.n(O),I=r("8336"),F=r("b0af"),V=r("99d9"),T=r("62ad"),R=r("132d"),W=r("8860"),j=r("da13"),E=r("1800"),U=r("1baa"),B=r("5d23"),H=r("e449"),$=r("0fd9"),A=r("2fa4"),P=r("b73d"),z=r("71d9"),M=r("2a7f"),Y=Object(m["a"])(L,a,n,!1,null,null,null);e["default"]=Y.exports;x()(Y,{VBtn:I["a"],VCard:F["a"],VCardActions:V["a"],VCol:T["a"],VIcon:R["a"],VList:W["a"],VListItem:j["a"],VListItemAction:E["a"],VListItemGroup:U["a"],VListItemTitle:B["b"],VMenu:H["a"],VRow:$["a"],VSpacer:A["a"],VSwitch:P["a"],VToolbar:z["a"],VToolbarTitle:M["a"]})},c8d7:function(t,e,r){"use strict";var a=r("626d"),n=r.n(a);n.a},d5f0:function(t,e,r){}}]);
//# sourceMappingURL=chunk-2f255ad3.c4b3cb4a.js.map