(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2f255ad3"],{"42f4":function(t,e,n){"use strict";var r=n("d5f0"),a=n.n(r);a.a},"626d":function(t,e,n){},"7e48":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-toolbar",{staticClass:"mb-6",attrs:{dark:"",dense:"",color:"#126496"}},[n("v-icon",[t._v("mdi-dots-hexagon")]),n("v-toolbar-title",{staticClass:"ml-3"},[t._v("DASHBOARD")]),n("v-spacer"),n("v-menu",{attrs:{"close-on-content-click":!1,bottom:"",origin:"center center",transition:"scale-transition"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on,a=e.attrs;return[n("v-icon",t._g(t._b({},"v-icon",a,!1),r),[t._v("mdi-dots-vertical")])]}}]),model:{value:t.menu,callback:function(e){t.menu=e},expression:"menu"}},[n("v-card",{attrs:{width:"5000"}},[n("v-row",{attrs:{dense:""}},t._l(t.setupMenu,(function(e,r){return n("v-col",{key:r,attrs:{cols:"3"}},[n("v-card",[n("draggable",t._b({attrs:{list:e,move:t.onMove},on:{start:function(e){t.isDragging=!0},end:function(e){t.isDragging=!1}}},"draggable",t.dragOptions,!1),t._l(e,(function(e){return n("v-card",{key:e.Cross},[n("v-switch",{attrs:{label:e.Cross,color:"green lighten-2"},on:{change:function(e){return t.createMenuColumns()}},model:{value:e.Show,callback:function(n){t.$set(e,"Show",n)},expression:"item.Show"}})],1)})),1)],1)],1)})),1),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{text:""},on:{click:function(e){t.menu=!1}}},[t._v("Cancel")]),n("v-btn",{attrs:{color:"primary",text:""},on:{click:t.saveSetup}},[t._v("Save")])],1)],1)],1)],1),n("v-row",{attrs:{"no-gutters":""}},t._l(t.activeSurfs,(function(e){return n("v-col",{key:e.Cross,attrs:{cols:"12",lg:"4",md:"6"}},[n("v-card",{staticClass:"ma-5",style:t.zoomLevel,attrs:{rounded:"",color:"grey lighten-3",flat:"",width:"542"}},[n("v-btn",{attrs:{absolute:"",ripple:"","x-small":"",fab:"",top:"",right:"",color:t.getWarningColor(e),elevation:"21",dark:""},on:{click:function(n){return t.gotoDvi(e)}}},[n("v-icon",[t._v(" "+t._s(t.batteryIcon(t.getWarningColor(e))))])],1),n("DashBoardSurf",{staticClass:"ma-0",attrs:{apidata:t.singleSurf(e),headerData:t.getHeader(e),footerData:t.getFooter(e),warningColor:t.getWarningColor(e)}}),n("h6",{attrs:{align:"center",justify:"center"}},[t._v(t._s(t.getFooter(e)))])],1)],1)})),1)],1)},a=[],s=(n("4de4"),n("7db0"),n("d81d"),n("c7cd"),n("5530")),o=n("15fd"),i=n("2909"),c=n("b85c"),u=(n("96cf"),n("1da1")),l=n("1a20"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"spreadsheet",staticClass:"jTable"})},h=[],f=(n("99af"),n("4160"),n("c975"),n("b64b"),n("07ac"),n("159b"),n("c4fc"),n("0179")),p=n.n(f),g=n("ee67"),v={name:"dashboardsuf",created:function(){},data:function(){return{alphabet:g.alphabet}},props:{apidata:{type:Array},headerData:{type:String},footerData:{type:String},warningColor:{type:String}},computed:{tableHeaders:function(){return Object.keys(this.apidata[0])},tableData:function(){var t=[];return this.apidata.forEach((function(e){t.push(Object.values(e))})),t.push([]),t},config:function(){return{data:this.tableData,colHeaders:this.tableHeaders,tableOverflow:!1,columnSorting:!1,colWidths:[60,50,100,55,55,55,55,55,62],allowInsertRow:!1,columns:this.setReadOnly(),nestedHeaders:[[{title:this.headerData,colspan:this.tableHeaders.length}]]}}},methods:{cellId:function(t,e){return"".concat(this.alphabet[t].toUpperCase()).concat(e)},setReadOnly:function(){for(var t=[],e=0;e<this.tableHeaders.length;e++)t.push({readOnly:!0});return t},FormatTable:function(t,e){e.hideIndex();for(var n=1;n<=e.rows.length;n++)for(var r=0;r<e.headers.length;r++)e.setStyle(this.cellId(r,n),"color","black");for(r=0;r<e.headers.length;r++)e.setStyle(this.cellId(r,e.rows.length),"background-color",this.warningColor);for(var a=this.tableHeaders.indexOf("ATM"),s=this.tableHeaders.indexOf("Term"),o=1;o<=t.length;o++)e.setStyle(this.cellId(a,o),"background-color","#D2DEE9"),e.setStyle(this.cellId(a,o),"font-weight","bold"),e.setStyle(this.cellId(s,o),"color","#000080"),e.setStyle(this.cellId(s,o),"font-weight","bold"),o>9&&e.setStyle(this.cellId(a,o),"background-color","#EDFAFD")}},mounted:function(){var t=p()(this.$refs.spreadsheet,this.config);this.FormatTable(this.apidata,t),Object.assign(this,{jExcelObj:t}),document.documentElement.style.setProperty("--warning-color","".concat(this.warningColor))}},m=v,b=(n("c8d7"),n("2877")),w=Object(b["a"])(m,d,h,!1,null,null,null),C=w.exports,S=n("c1df"),y=n.n(S),D=n("310e"),M=n.n(D),_=n("5caf"),x={created:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n,r,a,s,o,i,u,d;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.addEventListener("resize",t.handleResize),t.handleResize(),e.prev=2,e.next=5,l["a"].GetDashBoardSurfs({userName:t.$store.state.currentUser});case 5:if(n=e.sent,r=JSON.parse(n.data.dashBoardSurfs),null!==t.userPrefs){a=Object(c["a"])(t.userPrefs);try{for(a.s();!(s=a.n()).done;)o=s.value,i=r.find((function(t){return t.Cross===o.Cross})),i.Show=void 0!==i?o.Show:i.Show,t.surfs.push(i)}catch(h){a.e(h)}finally{a.f()}}else{u=Object(c["a"])(r);try{for(u.s();!(d=u.n()).done;)o=d.value,t.surfs.push(o)}catch(h){u.e(h)}finally{u.f()}}e.next=13;break;case 10:e.prev=10,e.t0=e["catch"](2),t.$store.dispatch("setSnackbar",{text:"".concat(e.t0," source: DashBoard.vue-created"),top:!0});case 13:t.createMenuColumns(),console.log(t.menu);case 15:case"end":return e.stop()}}),e,null,[[2,10]])})))()},destroyed:function(){window.removeEventListener("resize",this.handleResize)},data:function(){return{isDragging:!1,delayedDragging:!1,surfs:[],menu:!1,window:{width:0,height:0},firstWarningColor:"#2DCA61",secondWarningColor:"#71B7F9",thirdWarningColor:"#FC6949",setupMenu:{firstCol:[],secondCol:[],thirdCol:[],inactive:[]}}},components:{DashBoardSurf:C,Draggable:M.a,TreeView:_["a"]},computed:{dragOptions:function(){return{animation:0,group:"description",disabled:!1,ghostClass:"ghost"}},zoomLevel:function(){var t=window.innerWidth>1700?"90%":"80%";return{zoom:t}},userPrefs:function(){return this.$store.state.dashBoardPrefs},activeSurfs:function(){return this.surfs.filter((function(t){return!0===t.Show}))}},methods:{createMenuColumns:function(){this.setupMenu.firstCol=[],this.setupMenu.secondCol=[],this.setupMenu.thirdCol=[],this.setupMenu.inactive=[];for(var t=this.surfs.filter((function(t){return!0===t.Show})),e=0;e<t.length;e+=3)void 0!==t[e]&&this.setupMenu.firstCol.push(t[e]),void 0!==t[e+1]&&this.setupMenu.secondCol.push(t[e+1]),void 0!==t[e+2]&&this.setupMenu.thirdCol.push(t[e+2]);this.setupMenu.inactive=this.surfs.filter((function(t){return!1===t.Show}))},recombineSurfs:function(){for(var t=Math.max(this.setupMenu.firstCol.length,this.setupMenu.secondCol.length,this.setupMenu.thirdCol.length),e=[],n=0;n<t;n++)void 0!==this.setupMenu.firstCol[n]&&e.push(this.setupMenu.firstCol[n]),void 0!==this.setupMenu.secondCol[n]&&e.push(this.setupMenu.secondCol[n]),void 0!==this.setupMenu.thirdCol[n]&&e.push(this.setupMenu.thirdCol[n]);return e.push.apply(e,Object(i["a"])(this.setupMenu.inactive)),e},onMove:function(t){var e=t.relatedContext,n=t.draggedContext,r=e.element,a=n.element;return(!r||!r.fixed)&&!a.fixed},handleResize:function(){this.window.width=window.innerWidth,this.window.height=window.innerHeight-65,document.documentElement.style.setProperty("--main-width","".concat(this.window.width,"px")),document.documentElement.style.setProperty("--main-height","".concat(this.window.height,"px"))},saveSetup:function(){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,n=t.recombineSurfs().map((function(t){var e=t.Cross,n=t.Show;return{Cross:e,Show:n}})),e.next=4,l["a"].saveUserDashBoardPrefs({UserName:t.$store.state.currentUser,DashBoardUI:JSON.stringify(n)});case 4:e.sent,t.$store.dispatch("setSnackbar",{text:"DashBoard Layout Saved",centered:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e["catch"](0),t.$store.dispatch("setSnackbar",{text:"".concat(e.t0," source: DashBoard.vue-saveSetup"),bottom:!0});case 11:t.menu=!1;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})))()},gotoDvi:function(t){this.$store.dispatch("setActivecross",t),this.$router.push({name:"Dvi",params:{ccyPair:t.Cross}})},singleSurf:function(t){var e=[{}];return e=JSON.parse(t.Surface),e=e.map((function(t){t.DK_EFF,t.IPV_ATM,t.RR_MULT,t.S_FLY_MULT,t.SFLY25,t.SFLY10;var e=Object(o["a"])(t,["DK_EFF","IPV_ATM","RR_MULT","S_FLY_MULT","SFLY25","SFLY10"]);return Object(s["a"])({},e)})),e},getHeader:function(t){var e=t.Cross,n=JSON.parse(t.LastUpdate),r=n.Spot;return e=e+" "+r,e},getFooter:function(t){var e=JSON.parse(t.LastUpdate),n="Last Updated : "+e.Time;return n},getWarningColor:function(t){var e=JSON.parse(t.LastUpdate),n=y()(e.Time,"DD/MM/YYYY, h:mm:ss").toDate(),r=new Date,a=r-n,s=12e5,o=24e5,i=a<=s?this.firstWarningColor:a<=o?this.secondWarningColor:this.thirdWarningColor;return i},batteryIcon:function(t){return t===this.firstWarningColor?"mdi-battery-high":t===this.secondWarningColor?"mdi-battery-medium":t===this.thirdWarningColor?"mdi-battery-low":void 0}},watch:{isDragging:function(t){var e=this;t?this.delayedDragging=!0:(this.$nextTick((function(){e.delayedDragging=!1})),this.surfs=this.recombineSurfs())}}},k=x,O=(n("42f4"),n("6544")),F=n.n(O),L=n("8336"),T=n("b0af"),R=n("99d9"),j=n("62ad"),I=n("132d"),W=n("e449"),E=n("0fd9"),U=n("2fa4"),V=n("b73d"),B=n("71d9"),$=n("2a7f"),H=Object(b["a"])(k,r,a,!1,null,null,null);e["default"]=H.exports;F()(H,{VBtn:L["a"],VCard:T["a"],VCardActions:R["a"],VCol:j["a"],VIcon:I["a"],VMenu:W["a"],VRow:E["a"],VSpacer:U["a"],VSwitch:V["a"],VToolbar:B["a"],VToolbarTitle:$["a"]})},c8d7:function(t,e,n){"use strict";var r=n("626d"),a=n.n(r);a.a},d5f0:function(t,e,n){}}]);
//# sourceMappingURL=chunk-2f255ad3.7631ad5c.js.map